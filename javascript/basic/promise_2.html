<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Standard Promise Lab2: chain support of Promise API</title>
</head>
<body>
  
  <script>
  var promise = loadImage('html_babies.jpg');
  promise.then(function(img) {
    document.body.appendChild(img);
  }).catch(function(e) {
    console.log('Error occurred while loading image');
    console.dir(e);
  });

  function loadImage(url) {
    var promise = new Promise(
      function resolver(resolve, reject) {
        var img = new Image();
        img.src = url;
        img.onload = function() {
          resolve(img);
        };
        img.onerror = function(e) {
          reject(e);
        };
      });
    return promise;
  }
  </script>
</body>
</html>
